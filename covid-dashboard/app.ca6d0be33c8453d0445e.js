(()=>{"use strict";function e(){document.querySelector(`.${this.dataset.toggleClass}`).classList.toggle("FullScreen"),document.querySelector("body").style.overflowY="hidden"!==document.querySelector("body").style.overflowY?"hidden":"auto",void 0!==this.dataset.toggleFull&&(document.querySelector(`.${this.dataset.toggleFull}`).classList.toggle("Fullobj"),"canvas"===this.dataset.toggleFull&&Chart.instances[0].resize())}let t,o,n=[],d=[],r="cases";async function a(e,t){try{if("all"!==e){const o=await fetch(`   https://disease.sh/v3/covid-19/historical/${e}?lastdays=366`);return(await o.json()).timeline[t]}const o=await fetch("https://disease.sh/v3/covid-19/historical/all?lastdays=366");return(await o.json())[t]}catch(e){const o=document.createElement("div");o.className="graphsInformation",o.style="top: 0; position: absolute;text-align: center; width: 100%; background-color: gray;",o.innerHTML='<img style="margin-top:5px; " src="./assetes/img/icons-information.png" width="20px"><br>we did not find information on which to build graphs',document.querySelector(".tableCanvas").append(o);const n=await fetch("https://disease.sh/v3/covid-19/historical/all?lastdays=366"),d=await n.json();return window.countrySelected="all",document.querySelector("#country").value=window.countrySelected,setTimeout((()=>{document.querySelector(".graphsInformation").remove()}),3e3),d[t]}}function s(e,t,o,n){const d={label:"date",data:e,borderWidth:1,backgroundColor:"red",borderColor:"red",fill:!0,categoryPercentage:1,barPercentage:1};t.data.datasets=[d],t.data.labels=n,o.update()}function c(e,t,o,c,u,l){n=[],d=[],c!==e&&(c=e,"#status"===l?(r=c,a(window.countrySelected,c).then((e=>{Object.entries(e).forEach((([e,t])=>{d.push(t),n.push(e)})),s(d,t,o,n)}))):(window.countrySelected=c,a(window.countrySelected,u).then((e=>{Object.entries(e).forEach((([e,t])=>{d.push(t),n.push(e)})),s(d,t,o,n)}))))}const u=[];async function l(e){new Date;const t=document.querySelector(".globalInf");t.innerHTML="",document.createElement("div").innerHTML="";const o=document.querySelector("#Globalstatus").value,n=new Worker("./src/workerStat.js",{type:"module"});n.postMessage({choice:o,data:e}),n.onmessage=e=>{t.innerHTML=e.data,h()}}function i(e,t,o){const n=document.querySelector(`.${o}`);n.innerHTML="",document.querySelector(`.${t}`);const d=document.createElement("div");d.innerHTML="";const r=document.querySelector("#country1").value,a=e.filter((e=>e.country.toLowerCase().toString()===r.toLowerCase().toString()));d.innerHTML+=`<p style='color:#94a1b2;'>Cases: ${a[0].casesPerHundredThousand}</p>`,d.innerHTML+=`<p style='color:#94a1b2;'>Deaths: ${a[0].deathsPerHundredThousand}</p>`,d.innerHTML+=`<p style='color:#94a1b2;'>Recovered: ${a[0].recoveredPerHundredThousand}</p>`,n.append(d)}function y(e){const t=document.querySelector(".countryInf");t.innerHTML="";const o=document.createElement("div");o.innerHTML="";const n=document.querySelector("#country1").value,d=e.filter((e=>e.country.toLowerCase().toString()===n.toLowerCase().toString()));o.innerHTML+=`<p style='color:#94a1b2;'>Cases: ${d[0].cases}</p>`,o.innerHTML+=`<p style='color:#94a1b2;'>Deaths: ${d[0].deaths}</p>`,o.innerHTML+=`<p style='color:#94a1b2;'>Recovered: ${d[0].recovered}</p>`,t.append(o),i(e,"arrowToDownInputT","timeCountry"),i(e,"arrowToDownInputC","amountCountry")}function h(){const e=document.querySelectorAll(".countrySelected");Object.entries(e).forEach((([e,n])=>{n.addEventListener("click",(()=>{window.countrySelected=n.dataset.country,event,window.countrySelected,document.querySelector("#country1").value=window.countrySelected,y(u),c(window.countrySelected,t,o,document.querySelector("#country").value,r,"#country"),document.querySelector("#country").value=window.countrySelected}))}))}const p=L.map("map",{center:[17.385044,78.486671],zoom:10,attributionControl:!1}).setView([0,0],2);L.tileLayer("https://api.maptiler.com/maps/toner/{z}/{x}/{y}@2x.png?key=zkHdZm8T8kHbUdtvCExB",{atttibution:'<a href="https://www.maptiler.com/copyright/" target="_blank">&copy; MapTiler</a> <a href="https://www.openstreetmap.org/copyright" target="_blank">&copy; OpenStreetMap contributors</a>'}).addTo(p);const v=new L.LayerGroup,m=[];let g=[],T="cases";const w=document.querySelectorAll(".index_item");function f(){v.clearLayers(),m.splice(0,m.length),g=[],fetch("https://disease.sh/v3/covid-19/countries?yesterday=true").then((e=>e.json())).then((e=>{for(let t=0;t<e.length;t++){const o={country:e[t].country,lat:e[t].countryInfo.lat,long:e[t].countryInfo.long,cases:e[t].cases,deaths:e[t].deaths,recovered:e[t].recovered,todayCases:e[t].todayCases,todayDeaths:e[t].todayDeaths,todayRecovered:e[t].todayRecovered,casesPerHundredThousand:Math.round(e[t].casesPerOneMillion/10),deathsPerHundredThousand:Math.round(e[t].deathsPerOneMillion/10),recoveredPerHundredThousand:Math.round(e[t].recoveredPerOneMillion/10),todayCasesPerHundredThousand:Math.round(1e5*e[t].todayCases/e[t].population),todayDeathsPerHundredThousand:Math.round(1e5*e[t].todayDeaths/e[t].population),todayRecoveredPerHundredThousand:Math.round(1e5*e[t].todayRecovered/e[t].population)};0!==e[t].population&&(m.push(o),"cases"===T?H(e[t].cases):"deaths"===T?H(e[t].deaths):"recover"===T?H(e[t].recovered):"todayCases"===T?H(e[t].todayCases):"todayDeaths"===T?H(e[t].todayDeaths):"todayRecovered"===T?H(e[t].todayRecovered):"casesPerHundredThousand"===T?H(Math.round(e[t].casesPerOneMillion/10)):"deathsPerHundredThousand"===T?H(Math.round(e[t].deathsPerOneMillion/10)):"recoveredPerHundredThousand"===T?H(Math.round(e[t].recoveredPerOneMillion/10)):"todayCasesPerHundredThousand"===T?H(Math.round(1e5*e[t].todayCases/e[t].population)):"todayDeathsPerHundredThousand"==T?H(Math.round(1e5*e[t].todayDeaths/e[t].population)):"todayRecoveredPerHundredThousand"==T&&H(Math.round(1e5*e[t].todayRecovered/e[t].population)))}return m})).then((e=>{for(let t=0;t<e.length;t++){let o=0,n="",d="";document.querySelector(".legend").innerHTML=`<div class="circle one"><span>${g[210]+1} - ${g[217]}</span></div>\n\t\t\t\t\t\t\t<div class="circle two"><span>${g[150]+1} - ${g[210]}</span></div>\n\t\t\t\t\t\t\t<div class="circle three"><span>${g[80]+1} - ${g[150]}</span></div>\n\t\t\t\t\t\t\t<div class="circle four"><span>${g[30]+1} - ${g[80]}</span></div>\n\t\t\t\t\t\t\t<div class="circle five"><span>1 - ${g[30]}</span></div>\n\t\t\t\t\t\t\t<div class="circle six"><span>0</span></div>`,"cases"==T?(o=S(e[t].cases),n="#FF2300",d=`Cases: ${e[t].cases}`):"deaths"==T?(o=S(e[t].deaths),n="#D636C9",d=`Deaths: ${e[t].deaths}`):"recover"==T?(o=S(e[t].recovered),n="#409300",d=`Recovered: ${e[t].recovered}`):"todayCases"==T?(o=S(e[t].todayCases),n="#AC2B50",d=`Cases today: ${e[t].todayCases}`):"todayDeaths"==T?(o=S(e[t].todayDeaths),n="#7446D7",d=`Deaths today: ${e[t].todayDeaths}`):"todayRecovered"==T?(o=S(e[t].todayRecovered),n="#00C322",d=`Recovered today: ${e[t].todayRecovered}`):"casesPerHundredThousand"==T?(o=S(e[t].casesPerHundredThousand),n="#FF9200",d=`Cases per 100 000 population: ${e[t].casesPerHundredThousand}`):"deathsPerHundredThousand"==T?(o=S(e[t].deathsPerHundredThousand),n="#3F92D2",d=`Deaths per 100 000 population: ${e[t].deathsPerHundredThousand}`):"recoveredPerHundredThousand"==T?(o=S(e[t].recoveredPerHundredThousand),n="#FFD300",d=`Recovered per 100 000 population: ${e[t].recoveredPerHundredThousand}`):"todayCasesPerHundredThousand"==T?(o=S(e[t].todayCasesPerHundredThousand),n="#6A48D7",d=`Cases per 100 000 population today: ${e[t].todayCasesPerHundredThousand}`):"todayDeathsPerHundredThousand"==T?(o=S(e[t].todayDeathsPerHundredThousand)/10,n="#61B4CF",d=`Deaths per 100 000 population today: ${e[t].todayDeathsPerHundredThousand}`):"todayRecoveredPerHundredThousand"==T&&(o=S(e[t].todayRecoveredPerHundredThousand),n="#2F0571",d=`Recovered per 100 000 population today: ${e[t].todayRecoveredPerHundredThousand}`);const r=L.circle([e[t].lat,e[t].long],{color:n,fillColor:n,fillOpacity:.8,radius:o});document.querySelectorAll(".circle").forEach((e=>e.style.backgroundColor=`${n}`)),r.bindPopup(`<b>${e[t].country}</b></br>${d}`),r.on("mouseover",(()=>{r.openPopup()})),r.on("mouseout",(()=>{r.closePopup()})),v.addLayer(r).addTo(p)}}))}function H(e){g.push(e),g.sort((function(e,t){return e-t}))}function S(e){for(let t=0;t<g.length;t++){if(0==e)return 0;if(e>=1&&e<g[30])return 1e4;if(g[30]<=e&&e<g[80])return 5e4;if(g[80]<=e&&e<g[150])return 8e4;if(g[150]<=e&&e<g[210])return 12e4;if(g[210]<=e&&e<=g[217])return 2e5;if(g[217]<e)return 3e5}}function P(e){w.forEach((e=>e.classList.remove("active"))),e.classList.add("active")}const C=document.querySelector(".mapLegendBtn"),b=document.querySelector(".popup_legend");C.addEventListener("click",(()=>{b.classList.toggle("hidden")}));const E=document.getElementById("cases"),M=document.getElementById("deaths"),D=document.getElementById("recovered"),q=document.getElementById("cases_today"),$=document.getElementById("deaths_today"),k=document.getElementById("recovered_today"),I=document.getElementById("cases_per_hundred"),R=document.getElementById("deaths_per_hundred"),_=document.getElementById("recovered_per_hundred"),O=document.getElementById("cases_per_hundred_today"),B=document.getElementById("deaths_per_hundred_today"),x=document.getElementById("recovered_per_hundred_today");E.addEventListener("click",(()=>{T="cases",f(),P(E)})),M.addEventListener("click",(()=>{T="deaths",f(),P(M)})),D.addEventListener("click",(()=>{T="recover",f(),P(D)})),q.addEventListener("click",(()=>{T="todayCases",f(),P(q)})),$.addEventListener("click",(()=>{T="todayDeaths",f(),P($)})),k.addEventListener("click",(()=>{T="todayRecovered",f(),P(k)})),I.addEventListener("click",(()=>{T="casesPerHundredThousand",f(),P(I)})),R.addEventListener("click",(()=>{T="deathsPerHundredThousand",f(),P(R)})),_.addEventListener("click",(()=>{T="recoveredPerHundredThousand",f(),P(_)})),O.addEventListener("click",(()=>{T="todayCasesPerHundredThousand",f(),P(O)})),B.addEventListener("click",(()=>{T="todayDeathsPerHundredThousand",f(),P(B)})),x.addEventListener("click",(()=>{T="todayRecoveredPerHundredThousand",f(),P(x)})),window.addEventListener("DOMcontentLoaded",f()),window.countrySelected="all",window.onload=()=>{!function(){const t=document.querySelectorAll(".expandInput");for(let o=0;o<t.length;o+=1)t[o].addEventListener("click",e)}(),function(){const e=document.getElementById("graphs").getContext("2d");a("all","cases").then((a=>{n=[],d=[],Object.entries(a).forEach((([e,t])=>{d.push(t),n.push(e)})),t={type:"bar",data:{labels:n,unitStepSize:0,datasets:[{label:"amount",data:d,borderWidth:1,backgroundColor:"red",borderColor:"red",fill:!0,categoryPercentage:1,barPercentage:1}]},options:{responsive:!0,maintainAspectRatio:!1,aspectRatio:3,scales:{yAxes:[{scaleLabel:{display:!0,labelString:"COVID-19",unitStepSize:3e11},ticks:{beginAtZero:!0,maxTicksLimit:8}}],xAxes:[{ticks:{maxTicksLimit:8}}]},legend:{display:!1},tooltips:{}}},o=new Chart(e,t),document.querySelector("#country").addEventListener("change",(e=>{c(e.currentTarget.value,t,o,window.countrySelected,r,"#country")})),document.querySelector("#status").addEventListener("change",(e=>{c(e.currentTarget.value,t,o,r,window.countrySelected,"#status")}))}))}(),async function(){await fetch("https://disease.sh/v3/covid-19/countries?yesterday=true").then((e=>e.json())).then((e=>{for(let t=0;t<e.length;t++){const o={flag:e[t].countryInfo.flag,country:e[t].country,lat:e[t].countryInfo.lat,long:e[t].countryInfo.long,cases:e[t].cases,deaths:e[t].deaths,recovered:e[t].recovered,todayCases:e[t].todayCases,todayDeaths:e[t].todayDeaths,todayRecovered:e[t].todayRecovered,casesPerHundredThousand:Math.round(e[t].casesPerOneMillion/10),deathsPerHundredThousand:Math.round(e[t].deathsPerOneMillion/10),recoveredPerHundredThousand:Math.round(e[t].recoveredPerOneMillion/10),todayCasesPerHundredThousand:Math.round(1e5*e[t].todayCases/e[t].population),todayDeathsPerHundredThousand:Math.round(1e5*e[t].todayDeaths/e[t].population),todayRecoveredPerHundredThousand:Math.round(1e5*e[t].todayRecovered/e[t].population)};u.push(o)}return u}))}().then((()=>{l(u),h(),y(u),document.querySelector("#Globalstatus").addEventListener("change",(()=>{l(u),h()})),document.querySelector(".arrowToDownInputT").addEventListener("change",(e=>{document.querySelector(".timeCountry").style.display="none"===document.querySelector(".timeCountry").style.display?"block":"none"})),document.querySelector(".arrowToDownInputC").addEventListener("change",(()=>{document.querySelector(".amountCountry").style.display="none"===document.querySelector(".amountCountry").style.display?"block":"none"})),document.querySelector("#country1").addEventListener("change",(()=>{y(u)})),u.forEach((e=>{const t=new Option(e.country);document.querySelector("#country1").append(t)})),u.forEach((e=>{const t=new Option(e.country);document.querySelector("#country").append(t)}))})),f()}})();